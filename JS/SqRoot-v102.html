<!DOCTYPE html>
<!-- 15/9/21 Nev Goodyer: created from pseudo at https://bwattle.github.io/SquareRoot/JS/Q23.html
    19/9/21 v1.02 updated from v1.01 to write iterative lines
    NOTE: An infinite loop occurs for "decPlaces">16 -->
<html>
<head>
    <title>v1.02 Square root by averaging</title>
    <link rel="icon" href="../images/SSC_SmallLogo-60x81.png" />
    <meta charset="utf-8" />
    <script type='text/javascript'>
        function SqRt() {
            var number = Number(document.getElementById('txt1')["value"]);
            var decPlaces = Number(document.getElementById('txt2')["value"]);
            var minimum = 0;
            var maximum = number;
            var middle = (minimum + maximum) / 2;
            var accuracy = Math.pow(10, (-1 * decPlaces));
            var loopNum = 1;
            var strLoopTotals = "Loop 1, middle = " + middle;
            while (Math.abs((middle * middle) - number) > accuracy) {
                if (middle * middle > number) {
                    maximum = middle;
                } else {
                    minimum = middle;
                }
                middle = (minimum + maximum) / 2;
                loopNum = loopNum + 1;
                strLoopTotals = strLoopTotals + "\nLoop " + loopNum + ", middle = " + middle;
            }
            middle = Math.floor(middle / accuracy) * accuracy;
            document.getElementById('txtResult')["value"] = middle;
            document.getElementById('txtIterations')["value"] = "The square root of " + number
                + " correct to " + decPlaces + " decimal places is " + middle + "\n" + strLoopTotals;
        }
    </script>
</head>
<body>
    <h1>Square root by trial and error and averaging</h1>
    <h3><a href="JS/Q23.html" title="Link to question" target="_blank">Click to see the question</a></h3>
    <h3>v1.02 This version shows the iterations for each loop.</h3>
    <br />
    Enter the number you want the square root of:
    <br />
    <textarea id="txt1" rows="1" cols="20"></textarea><br />
    <br />
    Enter the accuracy in number of decimal places:<br />
    <textarea id="txt2" rows="1" cols="20"></textarea><br />
    <br />
    <input type="Button" value="Calculate square root" onclick="SqRt()" /><br />
    <br />
    The square root is:<br />
    <textarea id="txtResult" rows="1" cols="20"></textarea><br /> 
    <b><span style="color: red">If there are extra decimal places, it's because floating point decimals are NOT exact! </span></b><br />    
    <br />
    The iterations of this calculation are:<br />
    <textarea id="txtIterations" rows="30" cols="50"></textarea><br />
</body>
</html>
